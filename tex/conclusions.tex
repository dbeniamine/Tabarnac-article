%!TEX encoding=UTF-8 Unicode
%!TEX root=../tabarnac.tex

\section{Conclusions and Future Work}
\label{sec:concl}

In this paper, we presented \TABARNAC, a set of tools to analyze and
optimize the memory behavior of parallel applications running on NUMA
machines. We provide a custom memory tracer
based on the Pin dynamic binary instrumentation tool which records the
number of memory reads and writes performed by all threads for each data structure.
The advantage of instrumentation is that it is the most
accurate and portable way to generate memory traces.
Despite the overhead caused by the instrumentation, our tool is efficient enough to analyze even huge applications in a reasonable time.

While other studies tells how many remote access are triggered by which NUMA
node, line of code or data structure, we provide information on how data
structure are accessed. Such information allows the user to understand
\emph{why} performance issues occurs. We show these informations through
several  meaningful yet readable plots. For newcomers, each plot is preceded by explanations
on how to read it, what kind of memory access issues it can help to identify
and how to solve them.
%Our visualization also contains general
%explanations on NUMA machines and classical inefficient behavior.

Using \TABARNAC, we analyzed two parallel applications: \emph{Ondes3D}, a real life application that
simulates seismic waves, and\emph{IS} from the NAS
Parallel Benchmarks which is known for being memory intensive with a random
memory pattern. For both applications, \TABARNAC helped us
understand their performance issues.  Using this knowledge, we proposed
simple code modifications to optimize the memory behavior resulting, for each
application, in significant speedups compared to the original version (up to
$60\%$ speedup), and to the results provided by automated tools.

Future work will focus on two directions. First, we will improve the
structure detection support to be able to analyze Fortran programs, as many
scientific applications are written in Fortran. Second, we will improve the
detection of inefficient memory access behavior, such as an all-to-all
sharing, to make the analysis partly automatized.
