%!TEX encoding=UTF-8 Unicode
%!TEX root=../tabarnac.tex

\def\len{6}
\def\wid{0.3}
\def\dis{0.1}

\begin{tikzpicture}
	\footnotesize
	\node[align=left, text width=1.7cm] at (-0.5,-\wid-1.5*\dis) (label1) {\bfseries With prior information};

	\draw[thick] (0,0)              rectangle +(\len, \wid);
	\draw[thick] (1,-\wid*0-\dis*1) rectangle +(\len-1,-\wid);
	\draw[thick] (1,-\wid*1-\dis*2) rectangle +(\len-1,-\wid);
	\draw[thick] (1,-\wid*2-\dis*3) rectangle +(\len-1,-\wid);

	\draw[fill=black] (1,0)              rectangle +(0.12,\wid);
	\draw[fill=black] (1,-\wid*0-\dis*1) rectangle +(0.12,-\wid);
	\draw[fill=black] (1,-\wid*1-\dis*2) rectangle +(0.12,-\wid);
	\draw[fill=black] (1,-\wid*2-\dis*3) rectangle +(0.12,-\wid);

	\draw[very thick,densely dashed] (1,1.9*\wid) -- +(0,-\wid*5-\dis*4.3) node[near start,pos=-0.2,align=center] {Start of\\parallel phase};

	\draw [decorate,decoration={brace,amplitude=5pt}] (\len+.1,\wid) -- ++(0,-4*\wid-3*\dis) node [midway,right=2mm]{threads};

	% legend:
	\draw [] (-1.35,1.4) rectangle +(0.4,0.3) node[right,yshift=-1.4mm] { Normal execution};
	\draw [fill=black] (1.4,1.4) rectangle +(0.4,0.3)node[right,yshift=-1.6mm] { Mapping};
	\draw [fill=gray!30] (3.1,1.4) rectangle +(0.4,0.3) node[right,yshift=-1.4mm] { Training};
	\draw [pattern=crosshatch] (4.8,1.4) rectangle +(0.4,0.3) node[right,yshift=-1.4mm] { Lost opportunities};

\end{tikzpicture}


\begin{tikzpicture}
	\footnotesize
	\node[align=left, text width=2cm] at (-0.35,-\wid-1.5*\dis) (label1) {\bfseries Without prior information};

	\draw[thick] (0,0)              rectangle +(\len, \wid);
	\draw[fill=gray!30, thick] (1,0)              rectangle +(\len-1, \wid);
	\draw[fill=gray!30, thick] (1,-\wid*0-\dis*1) rectangle +(\len-1,-\wid);
	\draw[fill=gray!30, thick] (1,-\wid*1-\dis*2) rectangle +(\len-1,-\wid);
	\draw[fill=gray!30, thick] (1,-\wid*2-\dis*3) rectangle +(\len-1,-\wid);

	\draw[fill=black] (2,0)              rectangle +(0.12,\wid);
	\draw[fill=black] (4,-\wid*0-\dis*1) rectangle +(0.12,-\wid);
	\draw[fill=black] (5,-\wid*1-\dis*2) rectangle +(0.12,-\wid);
	\draw[fill=black] (3,-\wid*2-\dis*3) rectangle +(0.12,-\wid);

	\path[pattern=crosshatch] (1+0.12,0) rectangle +(1,\wid);
	\path[pattern=crosshatch] (1+0.12,-\wid*0-\dis*1) rectangle +(3,-\wid);
	\path[pattern=crosshatch] (1+0.12,-\wid*1-\dis*2) rectangle +(4,-\wid);
	\path[pattern=crosshatch] (1+0.12,-\wid*2-\dis*3) rectangle +(2,-\wid);

	\draw[very thick,densely dashed] (1,1.6*\wid) -- +(0,-\wid*5-\dis*5.5);

	\draw[decorate,decoration={brace,amplitude=5pt}] (\len+.1,\wid) -- ++(0,-4*\wid-3*\dis) node [midway,right=2mm]{threads};

	\draw[thick,|-latex] (0,-\wid*6) -- +(\len,0) node[below] {\itshape execution time};

\end{tikzpicture}
